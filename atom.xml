<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[心缘冰河]]></title>
  <subtitle><![CDATA[写出我人生,coding]]></subtitle>
  <link href="//atom.xml" rel="self"/>
  <link href="http://donahue-ldz.github.io/"/>
  <updated>2015-03-06T05:04:43.000Z</updated>
  <id>http://donahue-ldz.github.io/</id>
  
  <author>
    <name><![CDATA[donahue]]></name>
    <email><![CDATA[ldz2012yn@gmail.com]]></email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title><![CDATA[个人简历]]></title>
    <link href="http://donahue-ldz.github.io/2015/03/08/resume/"/>
    <id>http://donahue-ldz.github.io/2015/03/08/resume/</id>
    <published>2015-03-08T07:27:41.000Z</published>
    <updated>2015-03-06T05:04:43.000Z</updated>
    <content type="html"><![CDATA[<h1 id="李德钊个人简历">李德钊个人简历</h1><blockquote>
<p>科技引领时尚，技术成就未来</p>
</blockquote>
<hr>
<h2 id="基本信息">基本信息</h2><p><table><br>    <tr><br>        <td>姓名：</td><td>李德钊</td><td>性别：</td><td>男</td><br>    </tr><br>    <tr><br>        <td>邮箱：</td><td>ldz2012yn@gmail.com</td><td>电话：</td><td>18840838495</td><br>    </tr><br>    <tr><br>    <td>生日：</td><td>1993-08-21</td><td>在读学校：</td><td>大连理工大学</td><br>    </tr><br>     <tr><br>    <td>系别：</td><td>软件工程（软件开发与测试）</td><td>期望职位：</td><td>研发工程师JAVA</td><br>    </tr><br>    <tr><br>    <td>QQ：</td><td>1285310383</td><td>微信：</td><td>donahueWX</td><br>    </tr></table></p>
<h2 id=""></h2><h2 id="技能概述">技能概述</h2><h4 id="编程语言（平台）熟练程度排序">编程语言（平台）熟练程度排序</h4><ol>
<li>java</li>
<li>c/c++</li>
<li>php,python</li>
<li>js,html</li>
</ol>
<h4 id="框架熟悉程度">框架熟悉程度</h4><ol>
<li>spring</li>
<li>struct2,hibernate,netty</li>
<li>extjs,TestNG,Junit</li>
</ol>
<h4 id="其他">其他</h4><ul>
<li>熟练使用mysql，oracle等主流数据库</li>
<li>熟练使用maven，git等项目管理工具</li>
<li>熟练使用tomcat，jetty，nginx等服务器</li>
<li>喜欢使用linux，能进行常见shell编程，能进行linux环境下相关的编程</li>
<li>H3C网络工程师认证书，了解相关的网络知识</li>
</ul>
<hr>
<h2 id="项目经历">项目经历</h2><h3 id="公司项目">公司项目</h3><p>在公司实习大约一年时间，参与公司培训，获得师兄辅导，参与相关产品的研发，团队互相帮助。</p>
<h3 id="cmc框架设计">cmc框架设计</h3><p><code>时间：2014-6~2014-10</code></p>
<p><strong>项目简介</strong>: 大连宏基恒信公司的一个后台通用管理框架，支持界面多模块可视化配置。<br><strong>我的主要工作</strong>：数据库的架构的设计和实现，负责代码字典和系统日志版块的。</p>
<h3 id="极密盾平台运营管理系统">极密盾平台运营管理系统</h3><p><code>时间：2014-10~至今</code></p>
<p><strong>项目简介</strong>:点击<a href="http://www.jimidun.com" target="_blank" rel="external">官网</a>。您可将重要的隐私信息、帐号密码存储在极密盾设备中，远离记录帐号密码、隐私秘密的烦恼。<br><strong>我的工作</strong>:需求文档编写，使用cmc框架负责后台用户管理模块和设备管理模块的编写。</p>
<h2 id="学生项目">学生项目</h2><p>组织参与学生项目，相互学习，将在公司学到的相关知识更快转化，互相促进。</p>
<h4 id="卖客交易市场">卖客交易市场</h4><p><code>时间：2014-10~至今</code></p>
<p><strong>项目简介</strong>：校园二手交易市场。网站共用3个子系统：买家web端，卖家系统，网站管理系统，项目现在正在收尾测试阶段。<br><strong>我的主要工作</strong>:项目发起和组织者，需求规格说明文档的书写，项目经度安排和管理，数据库的设计和实现，卖家系统的实现，负责服务器端的安全权限设计。</p>
<h3 id="TEDxDalian">TEDxDalian</h3><p><code>时间：2014-06~2014-08</code></p>
<p><strong>项目简介</strong>: 由TED社团组织为大连站设计的网站，对TED的诠释，精彩片段回访，本次但会的申请和审批<br><strong>我的主要工作</strong>: 技术负责人，后端开发，封装了全新统一的数据层持久层访问操作，省略了数据持久层的开发。</p>
<h3 id="邻家铺子">邻家铺子</h3><p><code>时间：2013-08~2014-04</code></p>
<p><strong>项目简介</strong>：手机app，一个点餐购物系统，能最快最近购物，由于公司原因停止，项目完成几乎八成。<br><strong>我的工作</strong>: 负责服务器后台编写，负责缓存模块的代码编写。 </p>
<hr>
<h2 id="编程经验">编程经验</h2><p>多个项目由简到难实践，详解见<a href="https://github.com/donahue-ldz" target="_blank" rel="external">github</a></p>
<hr>
<h2 id="其他账号">其他账号</h2><p>github账号：<a href="https://github.com/donahue-ldz" target="_blank" rel="external">donahue-ldz</a><br>个人博客地址：<a href="http://www.donahuelives.com" target="_blank" rel="external">程序人生</a><br>github博客：<a href="https://donahue-ldz.github.io/" target="_blank" rel="external">心缘冰河</a></p>
<hr>
<h2 id="自我评价">自我评价</h2><p>资质一般，相信天道酬勤，相信努力会给自己以及行业带来新机遇。</p>
<p>不希望大学期间为了刷奖刷成绩，希望学到真本事，毕业时实践能力优于专科院校，理论能力不输于计算机理论系学生。</p>
<p>紧追前沿科技，希望未来成为行业的领军者。</p>
]]></content>
    <summary type="html">
    <![CDATA[<h1 id="李德钊个人简历">李德钊个人简历</h1><blockquote>
<p>科技引领时尚，技术成就未来</p>
</blockquote>
<hr>
<h2 id="基本信息">基本信息</h2><p><table><br>    <tr><br>        <]]>
    </summary>
    
      <category term="java" scheme="http://donahue-ldz.github.io/categories/java/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[MarkDown语法入门]]></title>
    <link href="http://donahue-ldz.github.io/2015/02/15/MarkDown%E8%AF%AD%E6%B3%95%E5%85%A5%E9%97%A8/"/>
    <id>http://donahue-ldz.github.io/2015/02/15/MarkDown语法入门/</id>
    <published>2015-02-15T02:32:21.000Z</published>
    <updated>2015-03-06T04:21:39.000Z</updated>
    <content type="html"><![CDATA[<h2 id="MarkDown_理念">MarkDown 理念</h2><blockquote>
<p>让文档更容易读、写和随意改。HTML 是一种发布的格式，Markdown 是一种书写的格式。就这样，Markdown 的格式语法只涵盖纯文本可以涵盖的范围.</p>
</blockquote>
<hr>
<h2 id="注意">注意</h2><blockquote>
<p>不在 Markdown 涵盖范围之内的标签，都可以直接在文档里面用 HTML 撰写。不需要额外标注这是 HTML 或是 Markdown；只要直接加标签就可以了。<br>要制约的只有一些 HTML 区块元素――比如 <code>&lt;div&gt;、&lt;table&gt;、&lt;pre&gt;、&lt;p&gt;</code>等标签，必须在 <strong>前后</strong> 加上 <strong>空行</strong> 与其它内容区隔开，还要求它们的开始标签与结尾标签不能用制表符或空格来缩进。Markdown 的生成器有足够智能，不会在 HTML 区块标签外加上不必要的 <code>&lt;p&gt;</code> 标签。</p>
</blockquote>
<hr>
<h1 id="常见的使用">常见的使用</h1><h3 id="标题">标题</h3><p>Markdown 支持两种标题的语法，类 Setext 和类 atx 形式。</p>
<blockquote>
<ol>
<li>类 Setext 形式是用底线的形式(在需要成为标题的文字下方加入…)，利用 = （最高阶标题）和 - （第二阶标题)</li>
<li>类 Atx 形式则是在行首插入 1 到 6 个 # ，对应到标题 1 到 6 阶</li>
</ol>
</blockquote>
<p><strong><em>你可以选择性地「闭合」类 atx 样式的标题，这纯粹只是美观用的若是觉得这样看起来比较舒适，你就可以在行尾加上<br>而行尾的 # 数量也不用和开头一样（行首的井字符数量决定标题的阶数）</em></strong></p>
<hr>
<h3 id="区块引用_Blockquotes">区块引用 Blockquotes</h3><ul>
<li>Markdown 标记区块引用是使用类似 email 中用 &gt; 的引用方式。</li>
<li>Markdown 也允许你偷懒只在整个段落的第一行最前面加上 &gt; </li>
<li>区块引用可以嵌套（例如：引用内的引用），只要根据层次加上不同数量的 &gt; </li>
<li>引用的区块内也可以使用其他的 Markdown 语法，包括标题、列表、代码区块等</li>
</ul>
<hr>
<h3 id="列表">列表</h3><p>Markdown 支持有序列表和无序列表。</p>
<ul>
<li>无序列表使用星号、加号或是减号作为列表标记 : <code>*+空格</code></li>
<li>有序列表则使用数字接着一个英文句点：<code>数字+句点+空格</code>  <strong>可以完全不在意数字的正确和顺序</strong></li>
<li>列表项目可以包含多个段落，每个项目下的段落都必须缩进 4 个空格或是 1 个制表符</li>
<li>如果要在列表项目内放进引用，那 &gt; 就需要缩进</li>
<li><code>如果要放代码区块的话，该区块就需要缩进两次，也就是 8 个空格或是 2 个制表符</code></li>
<li>在行首出现数字-句点-空白，要避免这样的状况，你可以在句点前面加上反斜杠     </li>
</ul>
<hr>
<h3 id="代码区块">代码区块</h3><p>Markdown 会用<code>&lt;pre&gt;</code> 和 <code>&lt;code&gt;</code> 标签来把代码区块包起来.<br>要在 Markdown 中建立代码区块很简单，只要简单地缩进 4 个空格或是 1 个制表符就可以(<strong>中间需要一行空行隔开</strong>)，一个代码区块会一直持续到没有缩进的那一行（或是文件结尾）。例如，下面的输入：</p>
<p>这是一个普通段落：</p>
<pre><code><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="keyword">String</span>[]args)
</code></pre><ul>
<li>在代码区块里面， &amp; 、 &lt; 和 &gt; 会自动转成 HTML 实体，这样的方式让你非常容易使用 Markdown 插入范例用的 HTML 原始码，只需要复制贴上，再加上缩进就可以了，剩下的 Markdown 都会帮你处理</li>
<li>代码区块中，一般的 Markdown 语法不会被转换，像是星号便只是星号，这表示你可以很容易地以 Markdown 语法撰写 Markdown 语法相关的文件</li>
</ul>
<hr>
<h3 id="分割线">分割线</h3><p>你可以在一行中用三个以上的<code>星号、减号、底线</code>来建立一个分隔线，行内不能有其他东西。你也可以在星号或是减号中间插入空格。下面每种写法都可以建立分隔线.</p>
<hr>
<h3 id="链接">链接</h3><p>Markdown 支持两种形式的链接语法： 行内式和参考式两种形式。</p>
<p>不管是哪一种，链接文字都是用 [方括号] 来标记。</p>
<ul>
<li>要建立一个行内式的链接，只要在方块括号后面紧接着圆括号并插入网址链接即可，如果你还想要加上链接的 title 文字，只要在网址后面，用双引号把 title 文字包起来即可，例如：<blockquote>
<p><code>This is [an example](http://example.com/ &quot;Title&quot;) inline link.</code><br><code>[This link](http://example.net/) has no title attribute.</code></p>
</blockquote>
</li>
</ul>
<p><code>如果你是要链接到同样主机的资源，你可以使用相对路径：See my [About](/about/) page for details.</code></p>
<ul>
<li>参考式的链接是在链接文字的括号后面再接上另一个方括号，而在第二个方括号里面要填入用以辨识链接的标记：<blockquote>
<p><code>This is [an example] [id] reference-style link</code>.<br>你也可以选择性地在两个方括号中间加上一个空格：<br><code>This is [an example] [id] reference-style link</code>.<br>接着，在文件的任意处，你可以把这个标记的链接内容定义出来：</p>
</blockquote>
</li>
</ul>
<p><code>[id]: http://example.com/  &quot;Optional Title Here&quot;</code> </p>
<h3 id="强调">强调</h3><p>Markdown 使用星号（<em>）和底线（_）作为标记强调字词的符号，被 </em> 或 <em> 包围的字词会被转成用 <code>&lt;em&gt;</code> 标签包围，用两个 * 或 </em> 包起来的话，则会被转成 <code>&lt;strong&gt;</code></p>
<h3 id="代码">代码</h3><ul>
<li>如果要标记一小段行内代码，你可以用反引号把它包起来（`）</li>
<li>如果要在代码区段内插入反引号，你可以用多个反引号来开启和结束代码区段：</li>
</ul>
<h3 id="图片">图片</h3><p>markdown 使用一种和链接很相似的语法来标记图片，同样也允许两种样式： 行内式和参考式。<br>行内式的图片语法看起来像是：</p>
<p><code>![Alt text](/path/to/img.jpg)</code></p>
<p><code>![Alt text](/path/to/img.jpg &quot;Optional title&quot;)</code><br>详细叙述如下：</p>
<p>一个惊叹号 !<br>接着一个方括号，里面放上图片的替代文字<br>接着一个普通括号，里面放上图片的网址，最后还可以用引号包住并加上 选择性的 ‘title’ 文字。<br>参考式的图片语法则长得像这样：</p>
<p><code>![Alt text][id]</code><br>「id」是图片参考的名称，图片参考的定义方式则和连结参考一样：</p>
<p><code>[id]: url/to/image  &quot;Optional title attribute&quot;</code><br>到目前为止， Markdown 还没有办法指定图片的宽高，如果你需要的话，你可以使用普通的 <code>&lt;img&gt;</code> 标签。</p>
<hr>
<h3 id="自动链接">自动链接</h3><blockquote>
<p>Markdown 支持以比较简短的自动链接形式来处理网址和电子邮件信箱，只要是用尖括号包起来， Markdown 就会自动把它转成链接。一般网址的链接文字就和链接地址一样，例如：<br><code>&lt;http://example.com/&gt;</code><br>Markdown 会转为：<br><code>&lt;a href=&quot;http://example.com/&quot;&gt;http://example.com/&lt;/a&gt;</code><br>邮址的自动链接也很类似，只是 Markdown 会先做一个编码转换的过程，把文字字符转成 16 进位码的 HTML 实体，这样的格式可以糊弄一些不好的邮址收集机器人<br><code>&lt;address@example.com&gt;</code></p>
</blockquote>
<hr>
<h3 id="反斜杠">反斜杠</h3><p><strong>也就是程序员所熟悉的转义符号</strong></p>
<hr>
<p><a href="http://wowubuntu.com/markdown/" target="_blank" rel="external">参考资料</a><a href="http://wowubuntu.com/markdown/" target="_blank" rel="external">http://wowubuntu.com/markdown/</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<h2 id="MarkDown_理念">MarkDown 理念</h2><blockquote>
<p>让文档更容易读、写和随意改。HTML 是一种发布的格式，Markdown 是一种书写的格式。就这样，Markdown 的格式语法只涵盖纯文本可以涵盖的范围.</p>
</bl]]>
    </summary>
    
      <category term="MarkDown" scheme="http://donahue-ldz.github.io/tags/MarkDown/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[log4j常见配置]]></title>
    <link href="http://donahue-ldz.github.io/2015/01/15/log4j%E5%B8%B8%E8%A7%81%E9%85%8D%E7%BD%AE/"/>
    <id>http://donahue-ldz.github.io/2015/01/15/log4j常见配置/</id>
    <published>2015-01-15T07:27:41.000Z</published>
    <updated>2015-03-06T02:22:41.000Z</updated>
    <content type="html"><![CDATA[<h2 id="xml类型的配置">xml类型的配置</h2><p>Log4j配置文件实现了输出到控制台、文件、固定大小文件、发送日志邮件、输出到数据库日志表、自定义标签等全套功能。 </p>
<pre><code><span class="pi">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>  
<span class="doctype">&lt;!DOCTYPE log4j:configuration SYSTEM "log4j.dtd"&gt;</span>  

<span class="tag">&lt;<span class="title">log4j:configuration</span>&gt;</span>  

 <span class="comment">&lt;!--自定义输出到控制台--&gt;</span>
 <span class="tag">&lt;<span class="title">appender</span> <span class="attribute">name</span>=<span class="value">"CONSOLE"</span> <span class="attribute">class</span>=<span class="value">"org.apache.log4j.ConsoleAppender"</span>&gt;</span>
  <span class="tag">&lt;<span class="title">layout</span> <span class="attribute">class</span>=<span class="value">"org.apache.log4j.PatternLayout"</span>&gt;</span>  
   <span class="tag">&lt;<span class="title">param</span> <span class="attribute">name</span>=<span class="value">"ConversionPattern"</span>  
    <span class="attribute">value</span>=<span class="value">"%d - %c -%-4r [%t] %-5p %x - %m%n"</span> /&gt;</span>  
  <span class="tag">&lt;/<span class="title">layout</span>&gt;</span>  

  <span class="comment">&lt;!--限制输出级别--&gt;</span>  
  <span class="tag">&lt;<span class="title">filter</span> <span class="attribute">class</span>=<span class="value">"org.apache.log4j.varia.LevelRangeFilter"</span>&gt;</span>  
   <span class="tag">&lt;<span class="title">param</span> <span class="attribute">name</span>=<span class="value">"LevelMax"</span> <span class="attribute">value</span>=<span class="value">"ERROR"</span>/&gt;</span>  
   <span class="tag">&lt;<span class="title">param</span> <span class="attribute">name</span>=<span class="value">"LevelMin"</span> <span class="attribute">value</span>=<span class="value">"TRACE"</span>/&gt;</span>  
  <span class="tag">&lt;/<span class="title">filter</span>&gt;</span>  
 <span class="tag">&lt;/<span class="title">appender</span>&gt;</span>  

 <span class="comment">&lt;!--输出到文件--&gt;</span>
 <span class="tag">&lt;<span class="title">appender</span> <span class="attribute">name</span>=<span class="value">"FILE"</span> <span class="attribute">class</span>=<span class="value">"org.apache.log4j.FileAppender"</span>&gt;</span>  
  <span class="tag">&lt;<span class="title">param</span> <span class="attribute">name</span>=<span class="value">"File"</span> <span class="attribute">value</span>=<span class="value">"log4j.log"</span>/&gt;</span>  
  <span class="tag">&lt;<span class="title">layout</span> <span class="attribute">class</span>=<span class="value">"org.apache.log4j.PatternLayout"</span>&gt;</span>  
   <span class="tag">&lt;<span class="title">param</span> <span class="attribute">name</span>=<span class="value">"ConversionPattern"</span>  
    <span class="attribute">value</span>=<span class="value">"%d - %c -%-4r [%t] %-5p %x - %m%n"</span> /&gt;</span>  
  <span class="tag">&lt;/<span class="title">layout</span>&gt;</span>  
 <span class="tag">&lt;/<span class="title">appender</span>&gt;</span>    

 <span class="comment">&lt;!--输出到数据库--&gt;</span>
 <span class="tag">&lt;<span class="title">appender</span> <span class="attribute">name</span>=<span class="value">"DATABASE"</span> <span class="attribute">class</span>=<span class="value">"org.apache.log4j.jdbc.JDBCAppender"</span>&gt;</span>  
  <span class="tag">&lt;<span class="title">param</span> <span class="attribute">name</span>=<span class="value">"URL"</span> <span class="attribute">value</span>=<span class="value">"jdbc:oracle:thin:@192.168.0.59:1521:oanet"</span>/&gt;</span>  
  <span class="tag">&lt;<span class="title">param</span> <span class="attribute">name</span>=<span class="value">"driver"</span> <span class="attribute">value</span>=<span class="value">"oracle.jdbc.driver.OracleDriver"</span>/&gt;</span>  
  <span class="tag">&lt;<span class="title">param</span> <span class="attribute">name</span>=<span class="value">"user"</span> <span class="attribute">value</span>=<span class="value">"user"</span>/&gt;</span>  
  <span class="tag">&lt;<span class="title">param</span> <span class="attribute">name</span>=<span class="value">"password"</span> <span class="attribute">value</span>=<span class="value">"password"</span>/&gt;</span>      
  <span class="tag">&lt;<span class="title">layout</span> <span class="attribute">class</span>=<span class="value">"org.apache.log4j.PatternLayout"</span>&gt;</span>  
   <span class="tag">&lt;<span class="title">param</span> <span class="attribute">name</span>=<span class="value">"ConversionPattern"</span> 
   <span class="attribute">value</span>=<span class="value">"INSERT INTO hdczoa.LOG4J(stamp,thread,info_level,class,message) VALUES ('%d', '%t', '%p', '%c', %m)"</span> /&gt;</span>  
  <span class="tag">&lt;/<span class="title">layout</span>&gt;</span>  
 <span class="tag">&lt;/<span class="title">appender</span>&gt;</span>  

 <span class="comment">&lt;!-- 发邮件（只有ERROR时才会发送！） --&gt;</span>  
 <span class="tag">&lt;<span class="title">appender</span> <span class="attribute">name</span>=<span class="value">"MAIL"</span>  <span class="attribute">class</span>=<span class="value">"org.apache.log4j.net.SMTPAppender"</span>&gt;</span>  
  <span class="tag">&lt;<span class="title">param</span> <span class="attribute">name</span>=<span class="value">"threshold"</span> <span class="attribute">value</span>=<span class="value">"debug"</span> /&gt;</span>  
  <span class="comment">&lt;!-- 日志的错误级别  
   &lt;param name="threshold" value="fatal"/&gt;  
  --&gt;</span>  
  <span class="comment">&lt;!-- 缓存文件大小，日志达到512K时发送Email --&gt;</span>  
  <span class="tag">&lt;<span class="title">param</span> <span class="attribute">name</span>=<span class="value">"BufferSize"</span> <span class="attribute">value</span>=<span class="value">"512"</span> /&gt;</span><span class="comment">&lt;!-- 单位K --&gt;</span>  
  <span class="tag">&lt;<span class="title">param</span> <span class="attribute">name</span>=<span class="value">"From"</span> <span class="attribute">value</span>=<span class="value">"test@163.com"</span> /&gt;</span>  
  <span class="tag">&lt;<span class="title">param</span> <span class="attribute">name</span>=<span class="value">"SMTPHost"</span> <span class="attribute">value</span>=<span class="value">"smtp.163.com"</span> /&gt;</span>  
  <span class="tag">&lt;<span class="title">param</span> <span class="attribute">name</span>=<span class="value">"Subject"</span> <span class="attribute">value</span>=<span class="value">"juyee-log4jMessage"</span> /&gt;</span>  
  <span class="comment">&lt;!--收件人--&gt;</span>
  <span class="tag">&lt;<span class="title">param</span> <span class="attribute">name</span>=<span class="value">"To"</span> <span class="attribute">value</span>=<span class="value">"reciever@163.com"</span> /&gt;</span>
  <span class="comment">&lt;!--发件人登陆邮箱服务器--&gt;</span>
  <span class="tag">&lt;<span class="title">param</span> <span class="attribute">name</span>=<span class="value">"SMTPUsername"</span> <span class="attribute">value</span>=<span class="value">"user"</span> /&gt;</span>  
  <span class="tag">&lt;<span class="title">param</span> <span class="attribute">name</span>=<span class="value">"SMTPPassword"</span> <span class="attribute">value</span>=<span class="value">"password"</span> /&gt;</span>  
  <span class="tag">&lt;<span class="title">layout</span> <span class="attribute">class</span>=<span class="value">"org.apache.log4j.PatternLayout"</span>&gt;</span>  
   <span class="tag">&lt;<span class="title">param</span> <span class="attribute">name</span>=<span class="value">"ConversionPattern"</span>  
    <span class="attribute">value</span>=<span class="value">"%-d{yyyy-MM-dd HH:mm:ss.SSS} [%p]-[%c] %m%n"</span> /&gt;</span>  
  <span class="tag">&lt;/<span class="title">layout</span>&gt;</span>  
 <span class="tag">&lt;/<span class="title">appender</span>&gt;</span>  

 <span class="tag">&lt;<span class="title">appender</span> <span class="attribute">name</span>=<span class="value">"ASYNC"</span> <span class="attribute">class</span>=<span class="value">"org.apache.log4j.AsyncAppender"</span>&gt;</span>  
  <span class="tag">&lt;<span class="title">param</span> <span class="attribute">name</span>=<span class="value">"BufferSize"</span> <span class="attribute">value</span>=<span class="value">"256"</span> /&gt;</span>  
  <span class="tag">&lt;<span class="title">appender-ref</span> <span class="attribute">ref</span>=<span class="value">"DATABASE"</span> /&gt;</span>  
 <span class="tag">&lt;/<span class="title">appender</span>&gt;</span>  

 <span class="comment">&lt;!--通过&lt;logger&gt;&lt;/logger&gt;的定义可以将各个包中的类日志输出到不同的日志文件中--&gt;</span>  
 <span class="tag">&lt;<span class="title">logger</span> <span class="attribute">name</span>=<span class="value">"packageName"</span> <span class="attribute">additivity</span>=<span class="value">"false"</span>&gt;</span>     
        <span class="tag">&lt;<span class="title">level</span> <span class="attribute">value</span>=<span class="value">"WARN"</span> /&gt;</span>     
        <span class="tag">&lt;<span class="title">appender-ref</span> <span class="attribute">ref</span>=<span class="value">"CONSOLE"</span> /&gt;</span>     
    <span class="tag">&lt;/<span class="title">logger</span>&gt;</span>  

 <span class="comment">&lt;!--通过&lt;category&gt;&lt;/category&gt;的定义可以将各个包中的类日志输出到不同的日志文件中--&gt;</span>  
 <span class="tag">&lt;<span class="title">category</span> <span class="attribute">name</span>=<span class="value">"com.litt3"</span>&gt;</span>     
    <span class="tag">&lt;<span class="title">level</span> <span class="attribute">value</span>=<span class="value">"DEBUG"</span> /&gt;</span>   
       <span class="tag">&lt;<span class="title">appender-ref</span> <span class="attribute">ref</span>=<span class="value">"CONSOLE"</span> /&gt;</span>  
       <span class="tag">&lt;<span class="title">appender-ref</span> <span class="attribute">ref</span>=<span class="value">"MAIL"</span> /&gt;</span>  
  <span class="tag">&lt;/<span class="title">category</span>&gt;</span>  

 <span class="tag">&lt;<span class="title">root</span>&gt;</span>  
  <span class="tag">&lt;<span class="title">priority</span> <span class="attribute">value</span>=<span class="value">"debug"</span> /&gt;</span>  
  <span class="tag">&lt;<span class="title">appender-ref</span> <span class="attribute">ref</span>=<span class="value">"CONSOLE"</span> /&gt;</span>  
  <span class="tag">&lt;<span class="title">appender-ref</span> <span class="attribute">ref</span>=<span class="value">"FILE"</span> /&gt;</span>  
 <span class="tag">&lt;/<span class="title">root</span>&gt;</span>  


<span class="tag">&lt;/<span class="title">log4j:configuration</span>&gt;</span>  
</code></pre><hr>
<h2 id="属性文件配置">属性文件配置</h2><p>Log4j配置文件实现了输出到控制台、文件、固定大小文件、发送日志邮件、输出到数据库日志表、自定义标签等全套功能。 </p>
<pre><code>log4j.rootLogger=DEBUG,console,dailyFile,im 
log4j<span class="class">.additivity</span><span class="class">.org</span><span class="class">.apache</span>=true 
</code></pre><h3 id="控制台(console)">控制台(console)</h3><pre><code>log4j<span class="class">.appender</span><span class="class">.console</span>=org<span class="class">.apache</span><span class="class">.log4j</span><span class="class">.ConsoleAppender</span> 
log4j<span class="class">.appender</span><span class="class">.console</span><span class="class">.Threshold</span>=DEBUG 
log4j<span class="class">.appender</span><span class="class">.console</span><span class="class">.ImmediateFlush</span>=true 
log4j<span class="class">.appender</span><span class="class">.console</span><span class="class">.Target</span>=System<span class="class">.err</span> 
log4j<span class="class">.appender</span><span class="class">.console</span><span class="class">.layout</span>=org<span class="class">.apache</span><span class="class">.log4j</span><span class="class">.PatternLayout</span> 
log4j<span class="class">.appender</span><span class="class">.console</span><span class="class">.layout</span><span class="class">.ConversionPattern</span>=[%-<span class="number">5</span>p] %<span class="function"><span class="title">d</span><span class="params">(%r)</span></span> --&gt; [%t] %l: %m %x %n 
</code></pre><h3 id="日志文件(logFile)">日志文件(logFile)</h3><pre><code>log4j<span class="class">.appender</span><span class="class">.logFile</span>=org<span class="class">.apache</span><span class="class">.log4j</span><span class="class">.FileAppender</span> 
log4j<span class="class">.appender</span><span class="class">.logFile</span><span class="class">.Threshold</span>=DEBUG 
log4j<span class="class">.appender</span><span class="class">.logFile</span><span class="class">.ImmediateFlush</span>=true 
log4j<span class="class">.appender</span><span class="class">.logFile</span><span class="class">.Append</span>=true 
log4j<span class="class">.appender</span><span class="class">.logFile</span><span class="class">.File</span>=log<span class="class">.log4j</span> 
log4j<span class="class">.appender</span><span class="class">.logFile</span><span class="class">.layout</span>=org<span class="class">.apache</span><span class="class">.log4j</span><span class="class">.PatternLayout</span> 
log4j<span class="class">.appender</span><span class="class">.logFile</span><span class="class">.layout</span><span class="class">.ConversionPattern</span>=[%-<span class="number">5</span>p] %<span class="function"><span class="title">d</span><span class="params">(%r)</span></span> --&gt; [%t] %l: %m %x %n 
</code></pre><h3 id="指定大小文件(rollingFile)">指定大小文件(rollingFile)</h3><p><code>文件大小到达指定尺寸的时候产生一个新的文件</code></p>
<pre><code>log4j<span class="class">.appender</span><span class="class">.rollingFile</span>=org<span class="class">.apache</span><span class="class">.log4j</span><span class="class">.RollingFileAppender</span> 
log4j<span class="class">.appender</span><span class="class">.rollingFile</span><span class="class">.Threshold</span>=DEBUG 
log4j<span class="class">.appender</span><span class="class">.rollingFile</span><span class="class">.ImmediateFlush</span>=true 
log4j<span class="class">.appender</span><span class="class">.rollingFile</span><span class="class">.Append</span>=true 
log4j<span class="class">.appender</span><span class="class">.rollingFile</span><span class="class">.File</span>=log<span class="class">.log4j</span> 
#文件达到多大开始重新开始记录新文件
log4j<span class="class">.appender</span><span class="class">.rollingFile</span><span class="class">.MaxFileSize</span>=<span class="number">200</span>KB 
log4j<span class="class">.appender</span><span class="class">.rollingFile</span><span class="class">.MaxBackupIndex</span>=<span class="number">50</span> 
log4j<span class="class">.appender</span><span class="class">.rollingFile</span><span class="class">.layout</span>=org<span class="class">.apache</span><span class="class">.log4j</span><span class="class">.PatternLayout</span> 
log4j<span class="class">.appender</span><span class="class">.rollingFile</span><span class="class">.layout</span><span class="class">.ConversionPattern</span>=[%-<span class="number">5</span>p] %<span class="function"><span class="title">d</span><span class="params">(%r)</span></span> --&gt; [%t] %l: %m %x %n 
</code></pre><h3 id="每天产生一个文件(dailyFile)">每天产生一个文件(dailyFile)</h3><pre><code>log4j<span class="class">.appender</span><span class="class">.dailyFile</span>=org<span class="class">.apache</span><span class="class">.log4j</span><span class="class">.DailyRollingFileAppender</span> 
log4j<span class="class">.appender</span><span class="class">.dailyFile</span><span class="class">.Threshold</span>=DEBUG 
log4j<span class="class">.appender</span><span class="class">.dailyFile</span><span class="class">.ImmediateFlush</span>=true 
log4j<span class="class">.appender</span><span class="class">.dailyFile</span><span class="class">.Append</span>=true 
log4j<span class="class">.appender</span><span class="class">.dailyFile</span><span class="class">.File</span>=log<span class="class">.log4j</span> 
log4j<span class="class">.appender</span><span class="class">.dailyFile</span><span class="class">.DatePattern</span>=<span class="string">'.'</span>yyyy-MM-<span class="tag">dd</span> 
log4j<span class="class">.appender</span><span class="class">.dailyFile</span><span class="class">.layout</span>=org<span class="class">.apache</span><span class="class">.log4j</span><span class="class">.PatternLayout</span> 
log4j<span class="class">.appender</span><span class="class">.dailyFile</span><span class="class">.layout</span><span class="class">.ConversionPattern</span>=[%-<span class="number">5</span>p] %<span class="function"><span class="title">d</span><span class="params">(%r)</span></span> --&gt; [%t] %l: %m %x %n 
</code></pre><h3 id="发送日志到指定邮件">发送日志到指定邮件</h3><pre><code>log4j<span class="class">.appender</span><span class="class">.mail</span>=org<span class="class">.apache</span><span class="class">.log4j</span><span class="class">.net</span><span class="class">.SMTPAppender</span> 
log4j<span class="class">.appender</span><span class="class">.mail</span><span class="class">.Threshold</span>=FATAL 
log4j<span class="class">.appender</span><span class="class">.mail</span><span class="class">.BufferSize</span>=<span class="number">10</span> 
log4j<span class="class">.appender</span><span class="class">.mail</span><span class="class">.From</span> = xxx@mail<span class="class">.com</span> 
log4j<span class="class">.appender</span><span class="class">.mail</span><span class="class">.SMTPHost</span>=mail<span class="class">.com</span> 
log4j<span class="class">.appender</span><span class="class">.mail</span><span class="class">.Subject</span>=Log4J Message 
log4j<span class="class">.appender</span><span class="class">.mail</span><span class="class">.To</span>= xxx@mail<span class="class">.com</span> 
log4j<span class="class">.appender</span><span class="class">.mail</span><span class="class">.layout</span>=org<span class="class">.apache</span><span class="class">.log4j</span><span class="class">.PatternLayout</span> 
log4j<span class="class">.appender</span><span class="class">.mail</span><span class="class">.layout</span><span class="class">.ConversionPattern</span>=[%-<span class="number">5</span>p] %<span class="function"><span class="title">d</span><span class="params">(%r)</span></span> --&gt; [%t] %l: %m %x %n 
</code></pre><h3 id="应用于数据库">应用于数据库</h3><pre><code>log4j<span class="class">.appender</span><span class="class">.database</span>=org<span class="class">.apache</span><span class="class">.log4j</span><span class="class">.jdbc</span><span class="class">.JDBCAppender</span> 
log4j<span class="class">.appender</span><span class="class">.database</span><span class="class">.URL</span>=jdbc:mysql:<span class="comment">//localhost:3306/test </span>
log4j<span class="class">.appender</span><span class="class">.database</span><span class="class">.driver</span>=com<span class="class">.mysql</span><span class="class">.jdbc</span><span class="class">.Driver</span> 
log4j<span class="class">.appender</span><span class="class">.database</span><span class="class">.user</span>=root 
log4j<span class="class">.appender</span><span class="class">.database</span><span class="class">.password</span>= 
log4j<span class="class">.appender</span><span class="class">.database</span><span class="class">.sql</span>=INSERT INTO LOG4J (Message) <span class="function"><span class="title">VALUES</span><span class="params">(<span class="string">'=[%-5p] %d(%r) --&gt; [%t] %l: %m %x %n'</span>)</span></span> 
log4j<span class="class">.appender</span><span class="class">.database</span><span class="class">.layout</span>=org<span class="class">.apache</span><span class="class">.log4j</span><span class="class">.PatternLayout</span> 
log4j<span class="class">.appender</span><span class="class">.database</span><span class="class">.layout</span><span class="class">.ConversionPattern</span>=[%-<span class="number">5</span>p] %<span class="function"><span class="title">d</span><span class="params">(%r)</span></span> --&gt; [%t] %l: %m %x %n 
</code></pre><h3 id="自定义Appender">自定义Appender</h3><pre><code>log4j<span class="class">.appender</span><span class="class">.im</span> = net<span class="class">.cybercorlin</span><span class="class">.util</span><span class="class">.logger</span><span class="class">.appender</span><span class="class">.IMAppender</span> 
log4j<span class="class">.appender</span><span class="class">.im</span><span class="class">.host</span> = mail<span class="class">.cybercorlin</span><span class="class">.net</span> 
log4j<span class="class">.appender</span><span class="class">.im</span><span class="class">.username</span> = username 
log4j<span class="class">.appender</span><span class="class">.im</span><span class="class">.password</span> = password 
log4j<span class="class">.appender</span><span class="class">.im</span><span class="class">.recipient</span> = 
log4j<span class="class">.appender</span><span class="class">.im</span><span class="class">.layout</span>=org<span class="class">.apache</span><span class="class">.log4j</span><span class="class">.PatternLayout</span> 
log4j<span class="class">.appender</span><span class="class">.im</span><span class="class">.layout</span><span class="class">.ConversionPattern</span>=[%-<span class="number">5</span>p] %<span class="function"><span class="title">d</span><span class="params">(%r)</span></span> --&gt; [%t] %l: %m %x %n 
</code></pre>]]></content>
    <summary type="html">
    <![CDATA[<h2 id="xml类型的配置">xml类型的配置</h2><p>Log4j配置文件实现了输出到控制台、文件、固定大小文件、发送日志邮件、输出到数据库日志表、自定义标签等全套功能。 </p>
<pre><code><span class="pi">&lt;?xml versio]]>
    </summary>
    
      <category term="log4j配置" scheme="http://donahue-ldz.github.io/tags/log4j%E9%85%8D%E7%BD%AE/"/>
    
      <category term="java" scheme="http://donahue-ldz.github.io/categories/java/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[日志记录]]></title>
    <link href="http://donahue-ldz.github.io/2015/01/05/%E6%97%A5%E5%BF%97%E8%AE%B0%E5%BD%95/"/>
    <id>http://donahue-ldz.github.io/2015/01/05/日志记录/</id>
    <published>2015-01-05T06:42:11.000Z</published>
    <updated>2015-03-06T03:35:25.000Z</updated>
    <content type="html"><![CDATA[<h2 id="日志服务">日志服务</h2><p>三个目的 ：</p>
<ul>
<li>监视代码中变量的变化情况，周期性的记录到文件中供其他应用进行统计分析工作</li>
<li>跟踪代码运行时轨迹，作为日后审计的依据</li>
<li><p>担当集成开发环境中的调试器的作用，向文件或控制台打印代码的调试信息</p>
<hr>
</li>
</ul>
<h2 id="log4j简介">log4j简介</h2><blockquote>
<p>Log4j是Apache的一个开放源代码项目，通过使用Log4j，我们可以控制日志信息输送的目的地为控制台、文件、GUI组件、甚至可以为套接口服务器、NT的事件记录器、UNIX Syslog守护进程等；我们也可以控制每一条日志的输出格式；通过定义每一条日志信息的级别，我们能够更加细致地控制日志的生成过程。这些可以通过一个配置文件来灵活地进行配置，而不需要修改应用的代码。</p>
<p>此外，通过 Log4j 其他语言接口，您可以在 C 、 C+ + 、 .Net 、 PL/SQL 程序中使用 Log4j ，其语法和用法与在 Java 程序中一样，使得多语言分布式系统得到一个统一一致的日志组件模块。而且，通 过使用各种第三方扩展，您可以很方便地将 Log4j 集成到 J2EE 、 JINI 甚至是 SNMP 应用中。</p>
</blockquote>
<hr>
<h2 id="Log4j三大类构成">Log4j三大类构成</h2><h3 id="Logger">Logger</h3><p>负责输出日志信息，并能够对日志信息进行分类筛选，即决定哪些日志信息应该被输出，哪些该被忽略。Loggers组件输出日志信息时分为5个级别：DEBUG、INFO、WARN、ERROR、FATAL。这五个级别的顺序是：DEBUG&lt;INFO&lt;WARN&lt;ERROR&lt;FATAL。如果设置某个Logger组件的级别是P，则只有级别比P高的日志信息才能输出。Logger是有继承关系的，最上层是rootLogger，定义的其他Logger都会继承rootLogger。</p>
<h3 id="Appender">Appender</h3><p>定义了日志输出目的地，指定日志信息应该被输出到什么地方。输出的目的地可以是控制台、文件或网络设备。<br>格式为：log4j.appender.appenderName =  其中， Log4j提供的appender有以下几种:</p>
<blockquote>
<ol>
<li>org.apache.log4j.ConsoleAppender （控制台）</li>
<li>org.apache.log4j.FileAppender （文件）</li>
<li>org.apache.log4j.DailyRollingFileAppender （每天产生一个日志文件）， </li>
<li>org.apache.log4j.RollingFileAppender （文件大小到达指定尺寸的时候产生一个新的文件） </li>
<li>org.apache.log4j.WriterAppender（将日志信息以流格式发送到任意指定的地方）</li>
<li>org.apache.log4j.JdbcAppender(将日志讯息保存到数据库中) </li>
</ol>
</blockquote>
<p>此外还可以自己定义</p>
<h3 id="Layout">Layout</h3><p>通过在Appender的后面附加Layout来实现格式化输出。</p>
<p>一个Logger可以有多个Appender，每个Appender对应一个Layout。<br>配置日志信息的格式（布局），其语法为：<br>log4j.appender.appenderName.layout = 其中， Log4j 提供的 layout 有以几种：</p>
<blockquote>
<ol>
<li>org.apache.log4j.HTMLLayout （以 HTML 表格形式布局）</li>
<li>org.apache.log4j.SimpleLayout （包含日志信息的级别和信息字符串）</li>
<li>org.apache.log4j.TTCCLayout （包含日志产生的时间、线程、类别等等信息） </li>
<li>org.apache.log4j.PatternLayout （可以灵活地指定布局模式）</li>
</ol>
</blockquote>
<p><code>org.apache.log4j.PatternLayout （可以灵活地指定布局模式）</code></p>
<blockquote>
<p>Log4J 采用类似 C 语言中的 printf 函数的打印格式格式化日志信息，打印参数如下：<br>%m 输出代码中指定的消息<br>%p 输出优先级，即 DEBUG ， INFO ， WARN ， ERROR ， FATAL<br>%r 输出自应用启动到输出该 log 信息耗费的毫秒数<br>%c 输出所属的类目，通常就是所在类的全名<br>%t 输出产生该日志事件的线程名<br>%n 输出一个回车换行符， Windows 平台为 “rn” ， Unix 平台为 “n”<br>%d 输出日志时间点的日期或时间，默认格式为 ISO8601，也可以在其后指定格式，比如： %d{yyy MMM dd HH:mm:ss,SSS} </p>
</blockquote>
<hr>
<h2 id="常见优秀配置配置">常见优秀配置配置</h2><p>详见博文，<a href="http://donahue-ldz.github.io/2015/01/15/log4j%E5%B8%B8%E8%A7%81%E9%85%8D%E7%BD%AE/" target="_blank" rel="external">log4j常见配置</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<h2 id="日志服务">日志服务</h2><p>三个目的 ：</p>
<ul>
<li>监视代码中变量的变化情况，周期性的记录到文件中供其他应用进行统计分析工作</li>
<li>跟踪代码运行时轨迹，作为日后审计的依据</li>
<li><p>担当集成开发环境中的调试器的作用]]>
    </summary>
    
      <category term="log4j" scheme="http://donahue-ldz.github.io/tags/log4j/"/>
    
      <category term="日志记录" scheme="http://donahue-ldz.github.io/tags/%E6%97%A5%E5%BF%97%E8%AE%B0%E5%BD%95/"/>
    
      <category term="java" scheme="http://donahue-ldz.github.io/categories/java/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[finalize理解]]></title>
    <link href="http://donahue-ldz.github.io/2014/09/28/finalize%E7%90%86%E8%A7%A3/"/>
    <id>http://donahue-ldz.github.io/2014/09/28/finalize理解/</id>
    <published>2014-09-28T09:30:28.000Z</published>
    <updated>2015-03-06T03:34:42.000Z</updated>
    <content type="html"><![CDATA[<p><strong>Object类声明了protect finalize方法</strong></p>
<blockquote>
<p>我们都知道程序初始化的重要性，但是通常会忘记清除工作的重要性，我们知道在c++中有构造函数初始化，有相应的析构函数完成收尾清楚工作</p>
</blockquote>
<p>在java中，有c++样构造函数却没有其相应的析构函数，但是却有一个和析构函数相似的一个finalize方法，很多人容易混淆他们两个，下面是区别：</p>
<ol>
<li><p>c++中析构函数在对象声明周期结束时会被调用，数组等new出来时候，delete等函数时候析构会被调用，如果忘记调用这些函数的时候就会造成内存泄露</p>
</li>
<li><p>java中的finalize方法在GC进行回收之前在做<code>第二次标记</code>的时候会被调用。<br>如果对象没有覆盖finalize()或者已经被调用了一次之后，将不再调用了，如果需要调用的话会被加入一个称为F-queue队列中，然后由虚拟机去自动开一条低优先权的线程去执行，<strong>但是不一定会等待其去执行完</strong>。<br>我们知道对于GC什么时候调用，以及什么时候调用对象的finalize方法这些都是不确定的，一般情况下当内存比较充足时候GC不会去时刻调用的<br>因Gc调用也要消耗资源嘛，对于有些程序而言，有可能某些对象的没有调用GC时候程序已经结束，此时交给<strong>操作系统去回收内存</strong>。</p>
</li>
</ol>
<hr>
<p>所以finalize方法并不总是调用。但是这个方法还是比较有用的，我们知道：<br><code>java的GC之后回收new 出来的对象内存</code><br><code>对于有些时候我们使用native方法，如才c/c++时候采取malloc分配的内存此时GC就不能回收了</code><br>我们也不希望这些内存一直存在，我们可以在finalize方法中去调用native方法的free等函数去试着回收，当finalize方法被调用时候，就象的finalize方法被调用时候，我们可以在里面实现和析构函数相同的功能<br>但是如果没能呗回收了，最起码被回收的机会由原来的0变成大于0了</p>
<p>就是当对有被调用的时候，就不能同等去看待了<br>在现实的使用中我们完全可以忘掉这个方法，她所做的事情完全可以有finally模块去完成，不要使用他吧</p>
]]></content>
    <summary type="html">
    <![CDATA[<p><strong>Object类声明了protect finalize方法</strong></p>
<blockquote>
<p>我们都知道程序初始化的重要性，但是通常会忘记清除工作的重要性，我们知道在c++中有构造函数初始化，有相应的析构函数完成收尾清楚工作</p>
<]]>
    </summary>
    
      <category term="finalize" scheme="http://donahue-ldz.github.io/tags/finalize/"/>
    
      <category term="内存回收" scheme="http://donahue-ldz.github.io/tags/%E5%86%85%E5%AD%98%E5%9B%9E%E6%94%B6/"/>
    
      <category term="java" scheme="http://donahue-ldz.github.io/categories/java/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[线程等待]]></title>
    <link href="http://donahue-ldz.github.io/2014/09/15/%E7%BA%BF%E7%A8%8B%E7%AD%89%E5%BE%85/"/>
    <id>http://donahue-ldz.github.io/2014/09/15/线程等待/</id>
    <published>2014-09-15T02:32:21.000Z</published>
    <updated>2015-03-06T03:35:47.000Z</updated>
    <content type="html"><![CDATA[<p><strong>在多线程程序设计中，经常会遇到一个线程等待一个或多个线程的场景<br>遇到这样的场景应该如何解决？</strong></p>
<blockquote>
<ul>
<li>如果是一个线程等待一个线程，则可以通过await()和notify()来实现；</li>
<li>如果是一个线程等待多个线程，则就可以使用CountDownLatch和CyclicBarrier来实现比较好的控制。</li>
</ul>
</blockquote>
<hr>
<h2 id="CountDownLatch应用">CountDownLatch应用</h2><p><code>场景：主要是:一个线程等待多个其他线程</code></p>
<p>例如：百米赛跑：8名运动员同时起跑，由于速度的快慢，肯定有会出现先到终点和晚到终点的情况，而终点有个统计成绩的仪器，当所有选手到达终点时，它会统计所有人的成绩并进行排序，然后把结果发送到汇报成绩的系统。</p>
<p>其实这就是一个CountDownLatch的应用场景：一个线程或多个线程等待其他线程运行达到某一目标后进行自己的下一步工作，而被等待的“其他线程”达到这个目标后继续自己下面的任务。</p>
<p>这个场景中：</p>
<p>被等待的“其他线程”——&gt;8名运动员<br>等待“其他线程”的这个线程——&gt;终点统计成绩的仪器<br>那么，如何来通过CountDownLatch来实现上述场景的线程控制和调度呢？</p>
<blockquote>
<p>jdk中CountDownLatch类有一个常用的构造方法：CountDownLatch(int count)<br>两个常用的方法：await()和countdown()</p>
</blockquote>
<p>其中count是一个计数器中的初始化数字，比如初始化的数字是2，当一个线程里调用了countdown()，则这个计数器就减一，当线程调用了await()，则这个线程就等待这个计数器变为0，当这个计数器变为0时，这个线程继续自己下面的工作。下面是上述CountDownLatch场景的实现：</p>
<p>Work类（运动员）：</p>
<pre><code><span class="keyword">import</span> java.util.concurrent.CountDownLatch;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Work</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>{
    <span class="keyword">private</span> <span class="keyword">int</span> id;
    <span class="keyword">private</span> CountDownLatch beginSignal;
    <span class="keyword">private</span> CountDownLatch endSignal;

    <span class="function"><span class="keyword">public</span> <span class="title">Work</span><span class="params">(<span class="keyword">int</span> id, CountDownLatch begin, CountDownLatch end)</span> </span>{
        <span class="keyword">this</span>.id = id;
        <span class="keyword">this</span>.beginSignal = begin;
        <span class="keyword">this</span>.endSignal = end;
    }

    <span class="annotation">@Override</span>
    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{
        <span class="keyword">try</span> {
              beginSignal.await();
              System.out.println(<span class="string">"起跑..."</span>);
              System.out.println(<span class="string">"work"</span> + id + <span class="string">"到达终点"</span>);
              endSignal.countDown();
              System.out.println(<span class="string">"work"</span> + id + <span class="string">"继续干其他事情"</span>);
            } <span class="keyword">catch</span> (InterruptedException e) {
                <span class="comment">// TODO Auto-generated catch block</span>
                e.printStackTrace();
            }
    }
</code></pre><p>}<br>Main类（终点统计仪器）：</p>
<pre><code>import java.util.concurrent.CountDownLatch;
<span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Main</span> {

    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{
        CountDownLatch begSignal = <span class="keyword">new</span> CountDownLatch(<span class="number">1</span>);
        CountDownLatch endSignal = <span class="keyword">new</span> CountDownLatch(<span class="number">8</span>);
        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i++) {
            <span class="keyword">new</span> Thread(<span class="keyword">new</span> Work(i, begSignal, endSignal)).start();
        }

    <span class="keyword">try</span> {
        begSignal.countDown();  <span class="comment">//统一起跑</span>
        endSignal.await();      <span class="comment">//等待运动员到达终点</span>
        System.<span class="keyword">out</span>.println(<span class="string">"结果发送到汇报成绩的系统"</span>);
        } <span class="keyword">catch</span> (InterruptedException e) {
            e.printStackTrace();
        }
     }
</code></pre><p>}</p>
<hr>
<h2 id="CyclicBarrier的应用">CyclicBarrier的应用</h2><p><code>场景：主要是多个线程之间相互等待，循环等待</code></p>
<p> 例如：有四个游戏玩家玩游戏，游戏有三个关卡，每个关卡必须要所有玩家都到达后才能允许通关。</p>
<p>其实这个场景里的玩家中如果有玩家A先到了关卡1，他必须等待其他所有玩家都到达关卡1时才能通过，也就是说：<br><code>线程之间需要互相等待，这和CountDownLatch的应用场景有区别。</code><br><code>CountDownLatch里的线程是到了运行的目标后继续干自己的其他事情</code><br><code>而这里的线程需要等待其他线程后才能继续完成下面的工作</code>。   </p>
<blockquote>
<p>jdk中CyclicBarrier类有两个常用的构造方法：</p>
<ol>
<li>CyclicBarrier(int parties)<br>这里的parties也是一个计数器，例如，初始化时parties里的计数是3，于是拥有该CyclicBarrier对象的线程当parties的计数为3时就唤醒，注：这里parties里的计数在运行时当调用CyclicBarrier:await()时,计数就加1，一直加到初始的值。</li>
<li>CyclicBarrier(int parties, Runnable barrierAction)<br>这里的parties与上一个构造方法的解释是一样的，这里需要解释的是第二个入参（Runnable barrierAction）,这个参数是一个实现Runnable接口的类的对象，也就是说当parties加到初始值时就出发barrierAction的内容。</li>
</ol>
</blockquote>
<p>下面来实现上述的应用场景：</p>
<p>Player类（玩家类）</p>
<pre><code><span class="keyword">import</span> java.util.concurrent.BrokenBarrierException;
<span class="keyword">import</span> java.util.concurrent.CyclicBarrier;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Player</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>{

    <span class="keyword">private</span> CyclicBarrier cyclicBarrier;
    <span class="keyword">private</span> <span class="keyword">int</span> id;

    <span class="function"><span class="keyword">public</span> <span class="title">Player</span><span class="params">(<span class="keyword">int</span> id, CyclicBarrier cyclicBarrier)</span> </span>{
        <span class="keyword">this</span>.cyclicBarrier = cyclicBarrier;
        <span class="keyword">this</span>.id = id;
    }

    <span class="annotation">@Override</span>
    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{
        <span class="keyword">try</span> {
            System.out.println(<span class="string">"玩家"</span> + id + <span class="string">"正在玩第一关..."</span>);
            cyclicBarrier.await();
            System.out.println(<span class="string">"玩家"</span> + id + <span class="string">"进入第二关..."</span>);
            } <span class="keyword">catch</span> (InterruptedException e) {
              e.printStackTrace();
        } <span class="keyword">catch</span> (BrokenBarrierException e) {
             e.printStackTrace();
    }
  }
}
</code></pre><p>GameBarrier类（关卡类，这里控制玩家必须全部到达第一关结束的关口才能进入第二关）</p>
<pre><code><span class="keyword">import</span> java.util.concurrent.CyclicBarrier;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GameBarrier</span> </span>{

    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{
    CyclicBarrier cyclicBarrier = <span class="keyword">new</span> CyclicBarrier(<span class="number">4</span>, <span class="keyword">new</span> Runnable() {

        <span class="annotation">@Override</span>
        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{
             System.out.println(<span class="string">"所有玩家进入第二关！"</span>);
        }
     });

    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) {
        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Player(i, cyclicBarrier)).start();
     }
  }
}
</code></pre>]]></content>
    <summary type="html">
    <![CDATA[<p><strong>在多线程程序设计中，经常会遇到一个线程等待一个或多个线程的场景<br>遇到这样的场景应该如何解决？</strong></p>
<blockquote>
<ul>
<li>如果是一个线程等待一个线程，则可以通过await()和notify()来实现；</li>]]>
    </summary>
    
      <category term="CyclicBarrier" scheme="http://donahue-ldz.github.io/tags/CyclicBarrier/"/>
    
      <category term="线程" scheme="http://donahue-ldz.github.io/tags/%E7%BA%BF%E7%A8%8B/"/>
    
      <category term="线程等待，CountDownLatch" scheme="http://donahue-ldz.github.io/tags/%E7%BA%BF%E7%A8%8B%E7%AD%89%E5%BE%85%EF%BC%8CCountDownLatch/"/>
    
      <category term="java" scheme="http://donahue-ldz.github.io/categories/java/"/>
    
  </entry>
  
</feed>